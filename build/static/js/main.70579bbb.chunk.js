(this["webpackJsonpredux-fundamentals-example"]=this["webpackJsonpredux-fundamentals-example"]||[]).push([[0],{1182:function(e,t){},119:function(e,t,a){e.exports=a(1302)},127:function(e,t,a){},1302:function(e,t,a){"use strict";a.r(t);var l=a(0),o=a.n(l),n=a(45),c=a.n(n),r=a(2),s=(a(127),a(10)),d=a(46);async function i(e){let{body:t,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l={"Content-Type":"application/json"},o={method:t?"POST":"GET",...a,headers:{...l,...a.headers}};let n;t&&(o.body=JSON.stringify(t));try{const t=await window.fetch(e,o);if(n=await t.json(),t.ok)return n;throw new Error(t.statusText)}catch(c){return Promise.reject(c.message?c.message:n)}}i.get=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(e,{...t,method:"GET"})},i.post=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i(e,{...a,body:t})};const m={All:"all",Active:"active",Completed:"completed"},u={status:m.All,colors:[]},p=Object(s.d)({name:"filters",initialState:u,reducers:{statusFilterChanged(e,t){e.status=t.payload},colorFilterChanged:{reducer(e,t){let{color:a,changeType:l}=t.payload;const{colors:o}=e;switch(l){case"added":o.includes(a)||o.push(a);break;case"removed":e.colors=o.filter(e=>e!==a);default:return}},prepare:(e,t)=>({payload:{color:e,changeType:t}})}}}),{colorFilterChanged:h,statusFilterChanged:b}=p.actions;var E=p.reducer;const f=Object(s.c)(),v=f.getInitialState({status:"idle"}),g=Object(s.b)("todos/fetchTodos",async()=>(await i.get("/fakeApi/todos")).todos),y=Object(s.b)("todos/saveNewTodo",async e=>{const t={text:e};return(await i.post("/fakeApi/todos",{todo:t})).todo}),C=Object(s.d)({name:"todos",initialState:v,reducers:{todoToggled(e,t){const a=t.payload,l=e.entities[a];l.completed=!l.completed},todoColorSelected:{reducer(e,t){const{color:a,todoId:l}=t.payload;e.entities[l].color=a},prepare:(e,t)=>({payload:{todoId:e,color:t}})},todoDeleted:f.removeOne,allTodosCompleted(e,t){Object.values(e.entities).forEach(e=>{e.completed=!0})},completedTodosCleared(e,t){const a=Object.values(e.entities).filter(e=>e.completed).map(e=>e.id);f.removeMany(e,a)}},extraReducers:e=>{e.addCase(g.pending,(e,t)=>{e.status="loading"}).addCase(g.fulfilled,(e,t)=>{f.setAll(e,t.payload),e.status="idle"}).addCase(y.fulfilled,f.addOne)}}),{allTodosCompleted:N,completedTodosCleared:O,todoAdded:j,todoColorSelected:k,todoDeleted:w,todoToggled:x}=C.actions;var T=C.reducer;const{selectAll:A,selectById:S}=f.getSelectors(e=>e.todos),I=(Object(d.a)(A,e=>e.map(e=>e.id)),Object(d.a)(A,e=>e.filters,(e,t)=>{const{status:a,colors:l}=t,o=a===m.All;if(o&&0===l.length)return e;const n=a===m.Completed;return e.filter(e=>{const t=o||e.completed===n,a=0===l.length||l.includes(e.color);return t&&a})})),F=Object(d.a)(I,e=>e.map(e=>e.id));var R,M=()=>{const[e,t]=Object(l.useState)(""),[a,n]=Object(l.useState)("idle"),c=Object(r.b)();let s="loading"===a,d=s?"":"What needs to be done?",i=s?o.a.createElement("div",{className:"loader"}):null;return o.a.createElement("header",{className:"header"},o.a.createElement("input",{className:"new-todo",placeholder:d,value:e,onChange:e=>t(e.target.value),onKeyDown:async a=>{const l=e.trim();13===a.which&&l&&(n("loading"),await c(y(l)),t(""),n("idle"))},disabled:s}),i)};function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e}).apply(null,arguments)}const G=e=>{let{svgRef:t,title:a,...l}=e;return o.a.createElement("svg",z({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"times",className:"svg-inline--fa fa-times fa-w-11",role:"img",viewBox:"0 0 352 512",ref:t},l),a?o.a.createElement("title",null,a):null,R||(R=o.a.createElement("path",{fill:"currentColor",d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})))},L=o.a.forwardRef((e,t)=>o.a.createElement(G,z({svgRef:t},e)));a.p;const B=["green","blue","orange","purple","red"],H=e=>e[0].toUpperCase()+e.slice(1);var P=e=>{let{id:t}=e;const a=Object(r.c)(e=>S(e,t)),{text:l,completed:n,color:c}=a,s=Object(r.b)(),d=B.map(e=>o.a.createElement("option",{key:e,value:e},H(e)));return o.a.createElement("li",null,o.a.createElement("div",{className:"view"},o.a.createElement("div",{className:"segment label"},o.a.createElement("input",{className:"toggle",type:"checkbox",checked:n,onChange:()=>{s(x(a.id))}}),o.a.createElement("div",{className:"todo-text"},l)),o.a.createElement("div",{className:"segment buttons"},o.a.createElement("select",{className:"colorPicker",value:c,style:{color:c},onChange:e=>{const t=e.target.value;s(k(a.id,t))}},o.a.createElement("option",{value:""}),d),o.a.createElement("button",{className:"destroy",onClick:()=>{s(w(a.id))}},o.a.createElement(L,null)))))};var $=()=>{const e=Object(r.c)(F);if("loading"===Object(r.c)(e=>e.todos.status))return o.a.createElement("div",{className:"todo-list"},o.a.createElement("div",{className:"loader"}));const t=e.map(e=>o.a.createElement(P,{key:e,id:e}));return o.a.createElement("ul",{className:"todo-list"},t)};const D=e=>{let{count:t}=e;const a=1===t?"":"s";return o.a.createElement("div",{className:"todo-count"},o.a.createElement("h5",null,"Remaining Todos"),o.a.createElement("strong",null,t)," item",a," left")},J=e=>{let{value:t,onChange:a}=e;const l=Object.keys(m).map(e=>{const l=m[e],n=l===t?"selected":"";return o.a.createElement("li",{key:l},o.a.createElement("button",{className:n,onClick:()=>a(l)},e))});return o.a.createElement("div",{className:"filters statusFilters"},o.a.createElement("h5",null,"Filter by Status"),o.a.createElement("ul",null,l))},q=e=>{let{value:t,onChange:a}=e;const l=B.map(e=>{const l=t.includes(e);return o.a.createElement("label",{key:e},o.a.createElement("input",{type:"checkbox",name:e,checked:l,onChange:()=>{a(e,l?"removed":"added")}}),o.a.createElement("span",{className:"color-block",style:{backgroundColor:e}}),H(e))});return o.a.createElement("div",{className:"filters colorFilters"},o.a.createElement("h5",null,"Filter by Color"),o.a.createElement("form",{className:"colorSelection"},l))};var K=()=>{const e=Object(r.b)(),t=Object(r.c)(e=>A(e).filter(e=>!e.completed).length),{status:a,colors:l}=Object(r.c)(e=>e.filters);return o.a.createElement("footer",{className:"footer"},o.a.createElement("div",{className:"actions"},o.a.createElement("h5",null,"Actions"),o.a.createElement("button",{className:"button",onClick:()=>e(N())},"Mark All Completed"),o.a.createElement("button",{className:"button",onClick:()=>e(O())},"Clear Completed")),o.a.createElement(D,{count:t}),o.a.createElement(J,{value:a,onChange:t=>e(b(t))}),o.a.createElement(q,{value:l,onChange:(t,a)=>e(h(t,a))}))};var U=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("nav",null,o.a.createElement("section",null,o.a.createElement("h1",null,"Redux Fundamentals Example"))),o.a.createElement("main",null,o.a.createElement("section",{className:"medium-container"},o.a.createElement("h2",null,"Todos"),o.a.createElement("div",{className:"todoapp"},o.a.createElement(M,null),o.a.createElement($,null),o.a.createElement(K,null)))))},W=a(17),Q=(a(109),a(72)),V=a.n(Q);const X=W.c.extend({serializeIds:"always"});let Y=V()();const Z=e=>{var t,a;return e[(t=0,a=e.length-1,t=Math.ceil(t),a=Math.floor(a),Math.floor(Y()*(a-t+1))+t)]},_=[{base:"Buy $THING",values:["milk","bread","cheese","toys"]},{base:"Clean $THING",values:["house","yard","bedroom","car"]},{base:"Read $THING",values:["newspaper","book","email"]}];new W.d({routes(){this.namespace="fakeApi",this.timing=2e3,this.resource("todos"),this.resource("lists");const e=this;this.post("/todos",(function(t,a){const l=this.normalizedRequestAttrs();if("error"===l.text)throw new Error("Could not save the todo!");return e.create("todo",l)}))},models:{todo:W.b.extend({}),list:W.b.extend({todos:Object(W.e)()})},factories:{todo:W.a.extend({id:e=>Number(e),text:()=>(()=>{const e=Z(_),t=Z(e.values);return e.base.replace("$THING",t)})(),completed:()=>!1,color:()=>""})},serializers:{todo:X.extend({serialize(e,t){const a=e=>{e.id=Number(e.id)};let l=X.prototype.serialize.apply(this,arguments);return l.todo?a(l.todo):l.todos&&l.todos.forEach(a),l}}),list:X},seeds(e){e.createList("todo",5)}});var ee=Object(s.a)({reducer:{todos:T,filters:E}});ee.dispatch(g()),c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(r.a,{store:ee},o.a.createElement(U,null))),document.getElementById("root"))}},[[119,1,2]]]);
//# sourceMappingURL=main.70579bbb.chunk.js.map